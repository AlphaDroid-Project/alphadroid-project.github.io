<div class="container">
  <h1>Devices</h1>
  <p>Browse available devices below.</p>

  <div class="devices-controls" style="text-align:center;margin-bottom:12px">
    <a href="/" style="text-decoration:none">
      <button class="mdui-btn mdui-btn-raised mdui-ripple">Home</button>
    </a>
  </div>

  <div id="device-search-wrapper" class="field large prefix round fill active" style="max-width:640px;margin:16px auto;">
    <i class="front">search</i>
    <input id="device-search-input" placeholder="Search devices (OEM, model, codename)" autocomplete="off" />
    <menu class="min" id="device-search-suggestions" style="display:none"></menu>
  </div>
  <div id="oem-filter-chips" class="center-align" style="display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin:4px auto 12px;max-width:760px;"></div>

  <div class="devices-container">
    <!-- loadDevices will populate this area -->
  </div>
</div>

<script>
  // If this fragment is loaded directly (e.g. when fetched as a standalone file),
  // attempt to render devices. If loadDevices isn't present yet, wait until load.
  (function () {
    function tryLoad() {
      if (typeof loadDevices === 'function') {
        try { loadDevices(0); } catch (e) { console.error(e); }
        return true;
      }
      return false;
    }
    if (!tryLoad()) {
      window.addEventListener('load', tryLoad);
      setTimeout(tryLoad, 300);
    }
  })();

  (function(){
    const el = document.getElementById('device-search-input');
    if(el){
      el.addEventListener('input', () => {
        window.__deviceSearchQuery = el.value || '';
        if (typeof loadDevices === 'function') loadDevices(0);
      });
    }
  })();
</script>

